{"ast":null,"code":"'use strict';\n\nconst GuildEmoji = require('./GuildEmoji');\n\nconst ReactionEmoji = require('./ReactionEmoji');\n\nconst ReactionUserManager = require('../managers/ReactionUserManager');\n\nconst Util = require('../util/Util');\n/**\n * Represents a reaction to a message.\n */\n\n\nclass MessageReaction {\n  /**\n   * @param {Client} client The instantiating client\n   * @param {APIReaction} data The data for the message reaction\n   * @param {Message} message The message the reaction refers to\n   */\n  constructor(client, data, message) {\n    /**\n     * The client that instantiated this message reaction\n     * @name MessageReaction#client\n     * @type {Client}\n     * @readonly\n     */\n    Object.defineProperty(this, 'client', {\n      value: client\n    });\n    /**\n     * The message that this reaction refers to\n     * @type {Message}\n     */\n\n    this.message = message;\n    /**\n     * Whether the client has given this reaction\n     * @type {boolean}\n     */\n\n    this.me = data.me;\n    /**\n     * A manager of the users that have given this reaction\n     * @type {ReactionUserManager}\n     */\n\n    this.users = new ReactionUserManager(this);\n    this._emoji = new ReactionEmoji(this, data.emoji);\n\n    this._patch(data);\n  }\n\n  _patch(data) {\n    // eslint-disable-next-line eqeqeq\n    if (this.count == undefined) {\n      /**\n       * The number of people that have given the same reaction\n       * @type {?number}\n       */\n      this.count = data.count;\n    }\n  }\n  /**\n   * Removes all users from this reaction.\n   * @returns {Promise<MessageReaction>}\n   */\n\n\n  async remove() {\n    await this.client.api.channels(this.message.channelId).messages(this.message.id).reactions(this._emoji.identifier).delete();\n    return this;\n  }\n  /**\n   * The emoji of this reaction. Either a {@link GuildEmoji} object for known custom emojis, or a {@link ReactionEmoji}\n   * object which has fewer properties. Whatever the prototype of the emoji, it will still have\n   * `name`, `id`, `identifier` and `toString()`\n   * @type {GuildEmoji|ReactionEmoji}\n   * @readonly\n   */\n\n\n  get emoji() {\n    if (this._emoji instanceof GuildEmoji) return this._emoji; // Check to see if the emoji has become known to the client\n\n    if (this._emoji.id) {\n      const emojis = this.message.client.emojis.cache;\n\n      if (emojis.has(this._emoji.id)) {\n        const emoji = emojis.get(this._emoji.id);\n        this._emoji = emoji;\n        return emoji;\n      }\n    }\n\n    return this._emoji;\n  }\n  /**\n   * Whether or not this reaction is a partial\n   * @type {boolean}\n   * @readonly\n   */\n\n\n  get partial() {\n    return this.count === null;\n  }\n  /**\n   * Fetch this reaction.\n   * @returns {Promise<MessageReaction>}\n   */\n\n\n  async fetch() {\n    const message = await this.message.fetch();\n    const existing = message.reactions.cache.get(this.emoji.id ?? this.emoji.name); // The reaction won't get set when it has been completely removed\n\n    this._patch(existing ?? {\n      count: 0\n    });\n\n    return this;\n  }\n\n  toJSON() {\n    return Util.flatten(this, {\n      emoji: 'emojiId',\n      message: 'messageId'\n    });\n  }\n\n  _add(user) {\n    if (this.partial) return;\n    this.users.cache.set(user.id, user);\n    if (!this.me || user.id !== this.message.client.user.id || this.count === 0) this.count++;\n    if (!this.me) this.me = user.id === this.message.client.user.id;\n  }\n\n  _remove(user) {\n    if (this.partial) return;\n    this.users.cache.delete(user.id);\n    if (!this.me || user.id !== this.message.client.user.id) this.count--;\n    if (user.id === this.message.client.user.id) this.me = false;\n\n    if (this.count <= 0 && this.users.cache.size === 0) {\n      this.message.reactions.cache.delete(this.emoji.id ?? this.emoji.name);\n    }\n  }\n\n}\n\nmodule.exports = MessageReaction;\n/**\n * @external APIReaction\n * @see {@link https://discord.com/developers/docs/resources/channel#reaction-object}\n */","map":{"version":3,"names":["GuildEmoji","require","ReactionEmoji","ReactionUserManager","Util","MessageReaction","constructor","client","data","message","Object","defineProperty","value","me","users","_emoji","emoji","_patch","count","undefined","remove","api","channels","channelId","messages","id","reactions","identifier","delete","emojis","cache","has","get","partial","fetch","existing","name","toJSON","flatten","_add","user","set","_remove","size","module","exports"],"sources":["C:/Users/ROUSER6/node_modules/discord.js/src/structures/MessageReaction.js"],"sourcesContent":["'use strict';\n\nconst GuildEmoji = require('./GuildEmoji');\nconst ReactionEmoji = require('./ReactionEmoji');\nconst ReactionUserManager = require('../managers/ReactionUserManager');\nconst Util = require('../util/Util');\n\n/**\n * Represents a reaction to a message.\n */\nclass MessageReaction {\n  /**\n   * @param {Client} client The instantiating client\n   * @param {APIReaction} data The data for the message reaction\n   * @param {Message} message The message the reaction refers to\n   */\n  constructor(client, data, message) {\n    /**\n     * The client that instantiated this message reaction\n     * @name MessageReaction#client\n     * @type {Client}\n     * @readonly\n     */\n    Object.defineProperty(this, 'client', { value: client });\n\n    /**\n     * The message that this reaction refers to\n     * @type {Message}\n     */\n    this.message = message;\n\n    /**\n     * Whether the client has given this reaction\n     * @type {boolean}\n     */\n    this.me = data.me;\n\n    /**\n     * A manager of the users that have given this reaction\n     * @type {ReactionUserManager}\n     */\n    this.users = new ReactionUserManager(this);\n\n    this._emoji = new ReactionEmoji(this, data.emoji);\n\n    this._patch(data);\n  }\n\n  _patch(data) {\n    // eslint-disable-next-line eqeqeq\n    if (this.count == undefined) {\n      /**\n       * The number of people that have given the same reaction\n       * @type {?number}\n       */\n      this.count = data.count;\n    }\n  }\n\n  /**\n   * Removes all users from this reaction.\n   * @returns {Promise<MessageReaction>}\n   */\n  async remove() {\n    await this.client.api\n      .channels(this.message.channelId)\n      .messages(this.message.id)\n      .reactions(this._emoji.identifier)\n      .delete();\n    return this;\n  }\n\n  /**\n   * The emoji of this reaction. Either a {@link GuildEmoji} object for known custom emojis, or a {@link ReactionEmoji}\n   * object which has fewer properties. Whatever the prototype of the emoji, it will still have\n   * `name`, `id`, `identifier` and `toString()`\n   * @type {GuildEmoji|ReactionEmoji}\n   * @readonly\n   */\n  get emoji() {\n    if (this._emoji instanceof GuildEmoji) return this._emoji;\n    // Check to see if the emoji has become known to the client\n    if (this._emoji.id) {\n      const emojis = this.message.client.emojis.cache;\n      if (emojis.has(this._emoji.id)) {\n        const emoji = emojis.get(this._emoji.id);\n        this._emoji = emoji;\n        return emoji;\n      }\n    }\n    return this._emoji;\n  }\n\n  /**\n   * Whether or not this reaction is a partial\n   * @type {boolean}\n   * @readonly\n   */\n  get partial() {\n    return this.count === null;\n  }\n\n  /**\n   * Fetch this reaction.\n   * @returns {Promise<MessageReaction>}\n   */\n  async fetch() {\n    const message = await this.message.fetch();\n    const existing = message.reactions.cache.get(this.emoji.id ?? this.emoji.name);\n    // The reaction won't get set when it has been completely removed\n    this._patch(existing ?? { count: 0 });\n    return this;\n  }\n\n  toJSON() {\n    return Util.flatten(this, { emoji: 'emojiId', message: 'messageId' });\n  }\n\n  _add(user) {\n    if (this.partial) return;\n    this.users.cache.set(user.id, user);\n    if (!this.me || user.id !== this.message.client.user.id || this.count === 0) this.count++;\n    if (!this.me) this.me = user.id === this.message.client.user.id;\n  }\n\n  _remove(user) {\n    if (this.partial) return;\n    this.users.cache.delete(user.id);\n    if (!this.me || user.id !== this.message.client.user.id) this.count--;\n    if (user.id === this.message.client.user.id) this.me = false;\n    if (this.count <= 0 && this.users.cache.size === 0) {\n      this.message.reactions.cache.delete(this.emoji.id ?? this.emoji.name);\n    }\n  }\n}\n\nmodule.exports = MessageReaction;\n\n/**\n * @external APIReaction\n * @see {@link https://discord.com/developers/docs/resources/channel#reaction-object}\n */\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}